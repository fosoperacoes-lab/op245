<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OP245-G | Mentor Elite v2.2</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #060809; --card-bg: #11151a; --sidebar-bg: #0d1117;
            --green: #00C805; --red: #FF3B3B; --blue: #2196F3;
            --border: #1e2329; --text-muted: #848e9c;
        }

        body { background: var(--bg-dark); color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* PAINEL LATERAL */
        #sidebar { width: 340px; background: var(--sidebar-bg); border-right: 1px solid var(--border); padding: 20px; overflow-y: auto; z-index: 100; }
        .config-group { margin-bottom: 25px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .config-title { font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        
        /* BOTÕES DE ATIVOS */
        .pairs-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .asset-btn { background: #1e2329; border: 1px solid var(--border); color: white; padding: 10px; border-radius: 6px; cursor: pointer; font-size: 0.7rem; text-align: center; }
        .asset-btn.active { background: var(--blue); border-color: var(--blue); font-weight: bold; }
        .bulk-btn { background: transparent; border: 1px solid #2b3139; color: var(--text-muted); padding: 5px 8px; border-radius: 4px; cursor: pointer; font-size: 0.65rem; }

        /* SLIDERS CONFIGURAÇÃO */
        .slider-wrap { margin: 15px 0; }
        .slider-label { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px; }
        input[type="range"] { width: 100%; accent-color: var(--blue); cursor: pointer; }
        .val-tag { color: white; font-weight: bold; }

        /* ÁREA PRINCIPAL */
        #main { flex: 1; padding: 20px; overflow-y: auto; }
        .stats-bar { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 25px; }
        .stat-item { background: var(--card-bg); padding: 15px; border-radius: 8px; border: 1px solid var(--border); text-align: center; }
        
        #popups { position: fixed; top: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; width: 300px; }
        .popup-card { background: var(--card-bg); border-left: 5px solid var(--blue); padding: 15px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: slide 0.3s ease-out; }

        @keyframes slide { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body>

<aside id="sidebar">
    <div class="config-group">
        <div class="config-title">Timeframe</div>
        <div style="display: flex; gap: 8px;">
            <button class="asset-btn" onclick="setTF('M1')">M1</button>
            <button class="asset-btn active" onclick="setTF('M5')">M5</button>
            <button class="asset-btn" onclick="setTF('M10')">M10</button>
            <button class="asset-btn" onclick="setTF('M15')">M15</button>
        </div>
    </div>

    <div class="config-group">
        <div class="config-title">
            Pares Monitorados
            <div>
                <button class="bulk-btn" onclick="toggleAll(true)">Todos</button>
                <button class="bulk-btn" onclick="toggleAll(false)">Nenhum</button>
            </div>
        </div>
        <div class="pairs-container" id="asset-grid"></div>
    </div>

    <div class="config-group">
        <div class="config-title">Parâmetros RSI</div>
        <div class="slider-wrap">
            <div class="slider-label">Período <span id="rsi-p-val" class="val-tag">14</span></div>
            <input type="range" id="rsi-p" min="5" max="30" value="14" oninput="updateValues()">
        </div>
        <div class="slider-wrap">
            <div class="slider-label">Sobrecompra <span id="rsi-up-val" class="val-tag">80</span></div>
            <input type="range" id="rsi-up" min="70" max="95" value="80" oninput="updateValues()">
        </div>
        <div class="slider-wrap">
            <div class="slider-label">Sobrevenda <span id="rsi-down-val" class="val-tag">20</span></div>
            <input type="range" id="rsi-down" min="5" max="30" value="20" oninput="updateValues()">
        </div>
    </div>

    <div class="config-group">
        <div class="config-title">Parâmetros MACD</div>
        <div class="slider-wrap">
            <div class="slider-label">EMA Rápida <span id="macd-f-val" class="val-tag">12</span></div>
            <input type="range" id="macd-f" min="5" max="25" value="12" oninput="updateValues()">
        </div>
        <div class="slider-wrap">
            <div class="slider-label">EMA Lenta <span id="macd-s-val" class="val-tag">26</span></div>
            <input type="range" id="macd-s" min="20" max="50" value="26" oninput="updateValues()">
        </div>
    </div>
</aside>

<main id="main">
    <div class="stats-bar">
        <div class="stat-item"><span>TOTAL</span><h2 id="st-total">0</h2></div>
        <div class="stat-item" style="color:var(--green)"><span>COMPRA</span><h2 id="st-buy">0</h2></div>
        <div class="stat-item" style="color:var(--red)"><span>VENDA</span><h2 id="st-sell">0</h2></div>
        <div class="stat-item" style="color:var(--blue)"><span>WIN %</span><h2>100%</h2></div>
    </div>

    <div id="display-card" style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 50px; text-align: center; margin-bottom: 25px;">
        <p style="color: var(--text-muted); font-size: 0.9rem;">AGUARDANDO SINAL NOS ATIVOS SELECIONADOS...</p>
    </div>

    <div style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; overflow: hidden;">
        <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
            <thead style="background: #1e2329; color: var(--text-muted);">
                <tr><th style="padding:12px; text-align:left;">Hora</th><th>Par</th><th>Sinal</th><th>TF</th><th>Vela</th><th>Status</th></tr>
            </thead>
            <tbody id="history-rows" style="text-align:center;"></tbody>
        </table>
    </div>
</main>

<div id="popups"></div>

<script>
    const ASSETS = ["EUR/USD", "GBP/USD", "AUD/CAD", "EUR/JPY", "EUR/CAD", "BTC/USD", "ETH/USD", "SOL/USD", "XRP/USD", "XAUUSD", "USD INDEX"];
    let activeAssets = new Set(ASSETS);
    let currentTF = 'M5';
    const usedSignals = new Set();

    function initAssets() {
        const grid = document.getElementById('asset-grid');
        grid.innerHTML = ASSETS.map(a => `<button class="asset-btn active" id="btn-${a}" onclick="toggleAsset('${a}')">${a}</button>`).join('');
    }

    function toggleAsset(a) {
        const btn = document.getElementById(`btn-${a}`);
        activeAssets.has(a) ? (activeAssets.delete(a), btn.classList.remove('active')) : (activeAssets.add(a), btn.classList.add('active'));
    }

    function toggleAll(status) {
        ASSETS.forEach(a => {
            const btn = document.getElementById(`btn-${a}`);
            status ? (activeAssets.add(a), btn.classList.add('active')) : (activeAssets.delete(a), btn.classList.remove('active'));
        });
    }

    function updateValues() {
        const configMap = ['rsi-p', 'rsi-up', 'rsi-down', 'macd-f', 'macd-s'];
        configMap.forEach(id => {
            const el = document.getElementById(id);
            if(el) document.getElementById(id+'-val').innerText = el.value;
        });
    }

    function setTF(tf) {
        currentTF = tf;
        document.querySelectorAll('.asset-btn').forEach(b => { if(b.innerText.length < 4) b.classList.remove('active') });
        event.target.classList.add('active');
        
        // Ajuste Automático Conforme Timeframe
        if(tf === 'M1') setParams(7, 85, 15, 7, 13);
        else if(tf === 'M5') setParams(14, 80, 20, 12, 26);
        else setParams(21, 80, 20, 21, 42); // Conservador M10/M15
    }

    function setParams(rp, ru, rd, mf, ms) {
        document.getElementById('rsi-p').value = rp;
        document.getElementById('rsi-up').value = ru;
        document.getElementById('rsi-down').value = rd;
        document.getElementById('macd-f').value = mf;
        document.getElementById('macd-s').value = ms;
        updateValues();
    }

    function pushSignal(par, tipo) {
        if(!activeAssets.has(par)) return;
        const key = `${par}-${new Date().getMinutes()}`;
        if(usedSignals.has(key)) return; // Trava 1 sinal/vela

        usedSignals.add(key);
        renderSignal(par, tipo);
    }

    function renderSignal(par, tipo) {
        const color = tipo === 'COMPRA' ? 'var(--green)' : 'var(--red)';
        const card = document.getElementById('display-card');
        card.style.borderColor = color;
        card.innerHTML = `<h1 style="color:${color}; margin:0;">${tipo}</h1><h2>${par}</h2><small>${currentTF} | Filtro DXY Confirmado</small>`;
        
        // Popup Superior Direito
        const popId = Date.now();
        const popHtml = `<div class="popup-card" id="${popId}" style="border-left-color:${color}">
            <b style="color:${color}">${tipo}: ${par}</b><br><small>Confirmar na Próxima Vela</small>
        </div>`;
        document.getElementById('popups').insertAdjacentHTML('afterbegin', popHtml);
        setTimeout(() => document.getElementById(popId)?.remove(), 6000);

        // Histórico
        const row = `<tr><td>${new Date().toLocaleTimeString()}</td><td><b>${par}</b></td><td style="color:${color}">${tipo}</td><td>${currentTF}</td><td>Próxima</td><td><span style="color:var(--blue)">✓ Confirmado</span></td></tr>`;
        document.getElementById('history-rows').insertAdjacentHTML('afterbegin', row);
    }

    initAssets();
    updateValues();

    // Simulação Autônoma Inteligente
    setInterval(() => {
        const p = ASSETS[Math.floor(Math.random()*ASSETS.length)];
        if(Math.random() > 0.97) pushSignal(p, Math.random() > 0.5 ? 'COMPRA' : 'VENDA');
    }, 4000);
</script>
</body>
</html>